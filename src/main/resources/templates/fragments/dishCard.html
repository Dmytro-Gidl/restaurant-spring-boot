<!-- fragments/dishCard.html -->
<div th:fragment="dishCard(dish, backUrl)"
     class="single-menu"
     th:attr="data-dish-id=${dish.id},
              data-dish-name=${dish.name},
              data-dish-price=${dish.price},
              data-images=${dish.getImagePathsString()},
              data-dish-description=${dish.description}">
    <img th:if="${dish.imageFileName != null}"
         th:src="@{${dish.getimagePath()}}"
         alt="Dish image"/>
    <img th:if="${dish.imageFileName == null}"
         src="https://via.placeholder.com/150"
         alt="Placeholder"/>

    <div class="menu-content">
        <h4 th:inline="text">
            [[${dish.name}]]
            <span class="price" th:text="${dish.price}"></span>
        </h4>
        <p th:text="${dish.category}">Category</p>
        <p th:text="${dish.description}" class="menu-description">Description</p>

        <div class="star-display mb-2">
            <span th:each="i : ${#numbers.sequence(1,5)}">
                <i th:class="${dish.averageRating >= i ? 'fa fa-star text-warning' : 'fa fa-star-o text-warning'}"></i>
            </span>
            <span class="ms-1" th:text="${#numbers.formatDecimal(dish.averageRating,1,1)}"></span>
            <a th:href="@{/dishes/{id}/reviews(id=${dish.id},
                                             sortField=${sortField},
                                             sortDir=${sortDir},
                                             filterCategory=${filterCategory},
                                             pageNo=${currentPage},
                                             pageSize=${pageSize},
                                             backUrl=${backUrl})}"
               class="ms-2 link-light"
               th:text="${dish.reviewCount == 0 ? 'No Reviews' : dish.reviewCount + ' Reviews'}">Reviews</a>
        </div>

        <div class="myContainer m-1">
            <label th:attr="for=${'dishQty_' + dish.id}" class="visually-hidden">
                Quantity
            </label>
            <button class="decrement" type="button" onclick="stepperDecrement(this)">-</button>
            <input
                id="dishQty_${dish.id}"
                th:value="0"
                th:name="${'dishIdQuantityMap[' + dish.id + ']'}"
                type="number"
                min="0"
                max="100"
                step="1"
                readonly
            />
            <button class="increment" type="button" onclick="stepperIncrement(this)">+</button>
        </div>
    </div>
</div>
